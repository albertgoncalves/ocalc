#!/usr/bin/env bash

build () {
    home=$(pwd)
    cd $WD/src/
    ocamllex lexer.mll      # generates lexer.ml
    ocamlyacc parser.mly    # generates parser.ml and parser.mli
    ocamlc -c parser.mli
    ocamlc -c lexer.ml
    ocamlc -c parser.ml
    ocamlc -c calc.ml
    ocamlc lexer.cmo parser.cmo calc.cmo -o $WD/bin/calc
    cd $home
}

build
echo "./bin/calc"
rlwrap $WD/bin/calc
