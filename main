#!/usr/bin/env bash

build () {
    home=$(pwd)
    cd $WD/src/
    ocamllex lexer.mll      # generates lexer.ml
    menhir parser.mly       # generates parser.ml and parser.mli
    ocamlc -c parser.mli
    ocamlc lexer.ml parser.ml calc.ml -o "$WD/bin/calc"
    cd $home
}

build
echo "./bin/calc"
rlwrap $WD/bin/calc
